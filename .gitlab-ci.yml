# use the tidyverse rocker image, as it contains devtools preinstalled
image: rocker/tidyverse

# define stages of runner. at the moment,
# just test (no build or deploy).
stages:
  - test
  - build
  - check

# define test job
test-job:
  stage: test
  script:
    # run the R CMD check on the package (this path)
    - R CMD check ./ --no-manual
    # run the devtools test
    - R -e 'devtools::test()'

build-job:
  stage: build
  script:
    # install
    - R -e "roxygen2::roxygenise()"
    - R CMD build ./

check-job:                                                                                                                                                                                                  
  stage: check                                                                                                                                                                                              
  script:                                                                                                                                                                                                   
    - R CMD check *.tar.gz --no-manual 
